<MainStructure>:
    id: main_structure
    canvas:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            size: self.size
            pos: self.pos
    orientation: 'vertical'
    manager: sm
    box_layout: box_layout
    ScreenManager:
        id: sm

        #-----------------------First Screen-------------------------

        Screen:
            name: 'fidge'
            BoxLayout:
                orientation: 'vertical'
                child_2: scroll_view
                BoxLayout:
                    size_hint: 1, .1
                    padding: [0, 0, 50, 0]
                    TitleLabel:
                        text: 'Мой холодильник'
                        size_hint: 1, 1
                    Button:
                        color: 1, 0.58, 0.25, 1
                        size_hint: .2, .5
                        text_size: self.size
                        valign: 'center'
                        halign: 'right'
                        text: '+'
                        font_size: 20
                        background_normal: ''
                        background_down: ''
                        on_release:
                            Factory.GoodPopup().open()
                            Factory.GoodPopup().good_list_id(self.parent.parent.child_2.child_1)
                ScrollView:
                    id: scroll_view
                    child_1: good_list
                    GoodListGridLayout:
                        id: good_list
                        cols: 1
                        size_hint: 1,None
                        height: self.minimum_height
                        TestLabel:
                            text: 'Список продуктов:'
                            font_size: 16
                            padding: [20, 10]
                        EmptyLabel:
                            id: empty
                        Button:
                            size_hint: .1, None
                            padding: [50, 0]
                            background_down: ''
                            background_normal: ''
                            Image:
                                source: "img/loupe.png"
                                center_x: self.parent.center_x
                                center_y: self.parent.center_y
                                size: 0, 0
                        Label:
                            size_hint: 1, None

        #------------------Second Screen----------------------------

        Screen:
            name: 'book'
            BoxLayout:
                orientation: 'vertical'
                TitleLabel:
                    text: 'Рецепты'
                ScreenManager:
                    id: category_manager
                    Screen:
                        name: 'category_menu'
                        ScrollView:
                            GridLayout:
                                cols: 1
                                size_hint: 1,None
                                height: self.minimum_height
                                CategoryNameButton:
                                    text: 'Заготовки'
                                    on_release:
                                        category_manager.transition.direction = 'left'
                                        category_manager.current = 'blanks'
                                CategoryNameButton:
                                    text: 'Выпечка и десерты'
                                    on_release:
                                        category_manager.transition.direction = 'left'
                                        category_manager.current = 'desserts'
                                CategoryNameButton:
                                    text: 'Главные блюда'
                                    on_release:
                                        category_manager.transition.direction = 'left'
                                        category_manager.current = 'main_dishes'
                                CategoryNameButton:
                                    text: 'Завтраки'
                                    on_release:
                                        category_manager.transition.direction = 'left'
                                        category_manager.current = 'breakfasts'
                                CategoryNameButton:
                                    text: 'Салаты'
                                    on_release:
                                        category_manager.transition.direction = 'left'
                                        category_manager.current = 'salads'
                                CategoryNameButton:
                                    text: 'Супы'
                                    on_release:
                                        category_manager.transition.direction = 'left'
                                        category_manager.current = 'soups'
                                CategoryNameButton:
                                    text: 'Паста и пицца'
                                    on_release:
                                        category_manager.transition.direction = 'left'
                                        category_manager.current = 'pizza'
                                CategoryNameButton:
                                    text: 'Закуски'
                                    on_release:
                                        category_manager.transition.direction = 'left'
                                        category_manager.current = 'snacks'
                                CategoryNameButton:
                                    text: 'Сэндвичи'
                                    on_release:
                                        category_manager.transition.direction = 'left'
                                        category_manager.current = 'sandwiches'
                                CategoryNameButton:
                                    text: 'Ризотто'
                                    on_release:
                                        category_manager.transition.direction = 'left'
                                        category_manager.current = 'risotto'
                                CategoryNameButton:
                                    text: 'Напитки'
                                    on_release:
                                        category_manager.transition.direction = 'left'
                                        category_manager.current = 'drinks'
                                CategoryNameButton:
                                    text: 'Соусы и маринады'
                                    on_release:
                                        category_manager.transition.direction = 'left'
                                        category_manager.current = 'sauces'
                                CategoryNameButton:
                                    text: 'Бульоны'
                                    on_release:
                                        category_manager.transition.direction = 'left'
                                        category_manager.current = 'bouillons'
                                Label:
                                    size_hint: 1, None
                                    text: ''
                    Screen:
                        name: 'blanks'
                        ScrollView:
                            CategoryGridLayout:
                                GridLayout:
                                    cols: 2
                                    size_hint: 1, None
                                    BackCategoryButton:
                                        on_release:
                                            category_manager.current = 'category_menu'
                                            category_manager.transition.direction = 'right'
                                    TitleCategoryLabel:
                                        text: 'Заготовки'
                                GridLayout:
                                    cols:1
                                    size_hint: 1, None
                                    Label:
                                        size_hint: 1, None
                                        color: 1, 0, 0, 1
                                        text: 'Здесь будут рецепты'
                                        text_size: self.size
                                        valign: 'center'
                                        padding: [20, 0]

                    Screen:
                        name: 'desserts'
                        ScrollView:
                            CategoryGridLayout:
                                GridLayout:
                                    cols: 2
                                    size_hint: 1, None
                                    BackCategoryButton:
                                        on_release:
                                            category_manager.current = 'category_menu'
                                            category_manager.transition.direction = 'right'

                                    TitleCategoryLabel:
                                        text: 'Выпечка и десерты'
                                GridLayout:
                                    cols:1
                                    size_hint: 1, None
                                    Label:
                                        size_hint: 1, None
                                        color: 1, 0, 0, 1
                                        text: 'Здесь будут рецепты'
                                        text_size: self.size
                                        valign: 'center'
                                        padding: [20, 0]
                    Screen:
                        name: 'main_dishes'
                        ScrollView:
                            CategoryGridLayout:
                                GridLayout:
                                    cols: 2
                                    size_hint: 1, None
                                    BackCategoryButton:
                                        on_release:
                                            category_manager.current = 'category_menu'
                                            category_manager.transition.direction = 'right'
                                    TitleCategoryLabel:
                                        text: 'Основные блюда'
                                GridLayout:
                                    cols:1
                                    size_hint: 1, None
                                    Label:
                                        size_hint: 1, None
                                        color: 1, 0, 0, 1
                                        text: 'Здесь будут рецепты'
                                        text_size: self.size
                                        valign: 'center'
                                        padding: [20, 0]
                    Screen:
                        name: 'breakfasts'
                        ScrollView:
                            CategoryGridLayout:
                                GridLayout:
                                    cols: 2
                                    size_hint: 1, None
                                    BackCategoryButton:
                                        on_release:
                                            category_manager.transition.direction = 'right'
                                            category_manager.current = 'category_menu'
                                    TitleCategoryLabel:
                                        text: 'Завтраки'
                                GridLayout:
                                    cols:1
                                    size_hint: 1, None
                                    Label:
                                        size_hint: 1, None
                                        color: 1, 0, 0, 1
                                        text: 'Здесь будут рецепты'
                                        text_size: self.size
                                        valign: 'center'
                                        padding: [20, 0]
                    Screen:
                        name: 'salads'
                        ScrollView:
                            CategoryGridLayout:
                                GridLayout:
                                    cols: 2
                                    size_hint: 1, None
                                    BackCategoryButton:
                                        on_release:
                                            category_manager.transition.direction = 'right'
                                            category_manager.current = 'category_menu'
                                    TitleCategoryLabel:
                                        text: 'Салаты'
                                GridLayout:
                                    cols:1
                                    size_hint: 1, None
                                    Label:
                                        size_hint: 1, None
                                        color: 1, 0, 0, 1
                                        text: 'Здесь будут рецепты'
                                        text_size: self.size
                                        valign: 'center'
                                        padding: [20, 0]
                    Screen:
                        name: 'soups'
                        ScrollView:
                            CategoryGridLayout:
                                GridLayout:
                                    cols: 2
                                    size_hint: 1, None
                                    BackCategoryButton:
                                        on_release:
                                            category_manager.transition.direction = 'right'
                                            category_manager.current = 'category_menu'
                                    TitleCategoryLabel:
                                        text: 'Супы'
                                GridLayout:
                                    cols:1
                                    size_hint: 1, None
                                    Label:
                                        size_hint: 1, None
                                        color: 1, 0, 0, 1
                                        text: 'Здесь будут рецепты'
                                        text_size: self.size
                                        valign: 'center'
                                        padding: [20, 0]
                    Screen:
                        name: 'pizza'
                        ScrollView:
                            CategoryGridLayout:
                                GridLayout:
                                    cols: 2
                                    size_hint: 1, None
                                    BackCategoryButton:
                                        on_release:
                                            category_manager.transition.direction = 'right'
                                            category_manager.current = 'category_menu'
                                    TitleCategoryLabel:
                                        text: 'Паста и пицца'
                                GridLayout:
                                    cols:1
                                    size_hint: 1, None
                                    Label:
                                        size_hint: 1, None
                                        color: 1, 0, 0, 1
                                        text: 'Здесь будут рецепты'
                                        text_size: self.size
                                        valign: 'center'
                                        padding: [20, 0]
                    Screen:
                        name: 'snacks'
                        ScrollView:
                            CategoryGridLayout:
                                GridLayout:
                                    cols: 2
                                    size_hint: 1, None
                                    BackCategoryButton:
                                        on_release:
                                            category_manager.transition.direction = 'right'
                                            category_manager.current = 'category_menu'
                                    TitleCategoryLabel:
                                        text: 'Закуски'
                                GridLayout:
                                    cols:1
                                    size_hint: 1, None
                                    Label:
                                        size_hint: 1, None
                                        color: 1, 0, 0, 1
                                        text: 'Здесь будут рецепты'
                                        text_size: self.size
                                        valign: 'center'
                                        padding: [20, 0]
                    Screen:
                        name: 'sandwiches'
                        ScrollView:
                            CategoryGridLayout:
                                GridLayout:
                                    cols: 2
                                    size_hint: 1, None
                                    BackCategoryButton:
                                        on_release:
                                            category_manager.transition.direction = 'right'
                                            category_manager.current = 'category_menu'
                                    TitleCategoryLabel:
                                        text: 'Сэндвичи'
                                GridLayout:
                                    cols:1
                                    size_hint: 1, None
                                    Label:
                                        size_hint: 1, None
                                        color: 1, 0, 0, 1
                                        text: 'Здесь будут рецепты'
                                        text_size: self.size
                                        valign: 'center'
                                        padding: [20, 0]
                    Screen:
                        name: 'risotto'
                        ScrollView:
                            CategoryGridLayout:
                                GridLayout:
                                    cols: 2
                                    size_hint: 1, None
                                    BackCategoryButton:
                                        on_release:
                                            category_manager.transition.direction = 'right'
                                            category_manager.current = 'category_menu'
                                    TitleCategoryLabel:
                                        text: 'Ризотто'
                                GridLayout:
                                    cols:1
                                    size_hint: 1, None
                                    Label:
                                        size_hint: 1, None
                                        color: 1, 0, 0, 1
                                        text: 'Здесь будут рецепты'
                                        text_size: self.size
                                        valign: 'center'
                                        padding: [20, 0]
                    Screen:
                        name: 'drinks'
                        ScrollView:
                            CategoryGridLayout:
                                GridLayout:
                                    cols: 2
                                    size_hint: 1, None
                                    BackCategoryButton:
                                        on_release:
                                            category_manager.transition.direction = 'right'
                                            category_manager.current = 'category_menu'
                                    TitleCategoryLabel:
                                        text: 'Напитки'
                                GridLayout:
                                    cols:1
                                    size_hint: 1, None
                                    Label:
                                        size_hint: 1, None
                                        color: 1, 0, 0, 1
                                        text: 'Здесь будут рецепты'
                                        text_size: self.size
                                        valign: 'center'
                                        padding: [20, 0]
                    Screen:
                        name: 'sauces'
                        ScrollView:
                            CategoryGridLayout:
                                GridLayout:
                                    cols: 2
                                    size_hint: 1, None
                                    BackCategoryButton:
                                        on_release:
                                            category_manager.transition.direction = 'right'
                                            category_manager.current = 'category_menu'
                                    TitleCategoryLabel:
                                        text: 'Соусы'
                                GridLayout:
                                    cols:1
                                    size_hint: 1, None
                                    Label:
                                        size_hint: 1, None
                                        color: 1, 0, 0, 1
                                        text: 'Здесь будут рецепты'
                                        text_size: self.size
                                        valign: 'center'
                                        padding: [20, 0]
                    Screen:
                        name: 'bouillons'
                        ScrollView:
                            CategoryGridLayout:
                                GridLayout:
                                    cols: 2
                                    size_hint: 1, None
                                    BackCategoryButton:
                                        on_release:
                                            category_manager.transition.direction = 'right'
                                            category_manager.current = 'category_menu'
                                    TitleCategoryLabel:
                                        text: 'Бульоны'
                                GridLayout:
                                    cols:1
                                    size_hint: 1, None
                                    Label:
                                        size_hint: 1, None
                                        color: 1, 0, 0, 1
                                        text: 'Здесь будут рецепты'
                                        text_size: self.size
                                        valign: 'center'
                                        padding: [20, 0]
    #-------------------------------Third Screen----------------------------------------
        Screen:
            name: 'find'
            BoxLayout:
                orientation: 'vertical'
                TitleLabel:
                    text: 'Поиск рецептов'
                ScrollView:
                    BoxLayout:
                        orientation: 'vertical'
                        TestLabel:
                            text: 'Фильтры:'
                            font_size: 16
                            padding: [20, 10]
                        BoxLayout:
                            TestLabel:
                                text: 'Категория'
                                font_size: 14
                            Spinner:
                                text: 'Категория'
                                font_size: 14
                                values: 'Любая', 'Завтраки', 'Обеды', 'Закуски', 'Напитки', 'Закуски', 'Десерты'
                                size_hint: None, None
                                size: 100, 44

                        BoxLayout:
                            TestLabel:
                                text: 'Кухня'
                                font_size: 14
                            Spinner:
                                text: 'Кухня'
                                font_size: 14
                                values: 'Любая', 'Мексиканская', 'Итальянская', 'Русская', 'Грузинская', 'Японская', 'Китайская'
                                size_hint: None, None
                                size: 100, 44
                        Label:
                            text: ''
                            color: 0, 0, 0, 1




    #-----------------------------Forth Screen---------------------------------------

        Screen:
            name: 'favorites'
            BoxLayout:
                orientation: 'vertical'
                TitleLabel:
                    text: 'Избранные рецепты'

                ScrollView:
                    FavoritListGridLayout:
                        id: fav_list
                        cols: 1
                        height: self.minimum_height
                        Label:
                            size_hint: 1, .3
                            text: ''
                        BoxLayout:
                            orientation: 'horizontal'
                            id: fav1
                            cols: 2
                            size_hint: 1, .8
                            ListLabel:
                                text: 'Борщьч'
                                padding: [50, 0]
                            ListLabel:
                                text: 'ингредиенты'
                                padding: [60, 0]
                            DeleteFavButton:
                                on_release:
                                    fav_list.delete_fav(fav1)
                        BoxLayout:
                            id: fav2
                            cols: 3
                            size_hint: 1, .8
                            ListLabel:
                                text: 'Салатег "Цезаръ"'
                                padding: [50, 0]
                            DeleteFavButton:
                                on_release:
                                    fav_list.delete_fav(fav2)
                        BoxLayout:
                            id: fav3
                            cols: 4
                            size_hint: 1, .8
                            ListLabel:
                                text: 'Котлетки по-флотельски'
                                padding: [50, 0]
                            DeleteFavButton:
                                on_release:
                                    fav_list.delete_fav(fav3)

                        BoxLayout:
                            id: fav4
                            cols: 5
                            size_hint: 1, .8
                            ListLabel:
                                text: 'Мамины пельмешки из морозилки'
                                padding: [50, 0]
                            DeleteFavButton:
                                on_release:
                                    fav_list.delete_fav(fav4)

                        BoxLayout:
                            id: fav5
                            cols: 6
                            size_hint: 1, .8
                            ListLabel:
                                text: 'Кисель из пакетика'
                                padding: [50, 0]
                            DeleteFavButton:
                                on_release:
                                    fav_list.delete_fav(fav5)

                        BoxLayout:
                            id: fav6
                            cols: 7
                            size_hint: 1, .8
                            ListLabel:
                                text: 'Горячий сок из сока'
                                padding: [50, 0]
                            DeleteFavButton:
                                on_release:
                                    fav_list.delete_fav(fav6)

                        Label:
                            size_hint: 1, None
                            text: ''

    #------------------------Menu----------------------------------

    BoxLayout:
        id:box_layout
        size_hint: 1, 0.10
        button1: fidge
        button2: book
        button3: find
        button4: favorites
        MenuButton:
            id: fidge
            #text: 'fridge'
            on_release:
                root.manager.transition.duration = 0
                root.manager.current = 'fidge'
                root.box_layout.button2.color = (.67, 0.67, 0.67, 1)
                root.box_layout.button3.color = (.67, 0.67, 0.67, 1)
                root.box_layout.button4.color = (.67, 0.67, 0.67, 1)
            Image:
                source: "C:/Users/saraz/OneDrive/Рабочий стол/Новая папка/проект тмп/изображения/кальк2.png"
                center_x: self.parent.center_x
                center_y: self.parent.center_y
        MenuButton:
            text: 'book'
            id: book
            on_release:
                root.manager.transition.duration = 0
                root.manager.current = 'book'
                root.box_layout.button1.color = (.67, 0.67, 0.67, 1)
                root.box_layout.button3.color = (.67, 0.67, 0.67, 1)
                root.box_layout.button4.color = (.67, 0.67, 0.67, 1)
        MenuButton:
            id: find
            text: 'find'
            on_release:
                root.manager.transition.duration = 0
                root.manager.current = 'find'
                root.box_layout.button1.color = (.67, 0.67, 0.67, 1)
                root.box_layout.button2.color = (.67, 0.67, 0.67, 1)
                root.box_layout.button4.color = (.67, 0.67, 0.67, 1)
        MenuButton:
            id: favorites
            text: 'favorites'
            on_release:
                root.manager.transition.duration = 0
                root.manager.current = 'favorites'
                root.box_layout.button3.color = (.67, 0.67, 0.67, 1)
                root.box_layout.button2.color = (.67, 0.67, 0.67, 1)
                root.box_layout.button1.color = (.67, 0.67, 0.67, 1)



<Label>
    font_name: 'Roboto'

<TitleLabel@Label>
    color: 1, 0.58, 0.25, 1
    size_hint: 1, 0.1
    text_size: self.size
    font_size: 20
    padding: [20, 0]

<MenuButton@Button>
    background_normal: ''
    background_down: ''
    background_color: 1, 1, 1, 1
    color: .67, 0.67, 0.67, 1
    on_release:
        self.color = (1, 0.58, 0.25, 1)

<DeleteGoodButton@Button>
    background_normal: ''
    background_down: ''
    text: 'x'
    color: 1, 0.58, 0.25, 1
    font_size: 18
    text_size: self.size
    valign: 'center'
    halign: 'right'
    padding: [50, 0]

<TestLabel@Label>
    color: 0, 0, 0, 1
    size_hint: 1, None
    text_size: self.size
    font_size: 14
    valign: 'center'
    padding: [20, 0]

<CategoryNameButton@Button>
    size_hint: 1, None
    background_normal: ''
    background_down: ''
    color: 0, 0, 0, 1
    text_size: self.size
    font_size: 16
    valign: 'center'
    padding: [20, 0]

<BackCategoryButton@Button>
    size_hint: .05, 1
    text: '<-'
    color: 0, 0, 0, 1
    background_normal: ''
    background_down: ''

<TitleCategoryLabel@Label>
    size_hint: 1, 1
    color: 0, 0, 0, 1
    text_size: self.size
    valign: 'center'

<CategoryGridLayout@GridLayout>
    cols: 1
    size_hint: 1,None
    height: self.minimum_height

<ScrollView>
    effect_cls: 'ScrollEffect'
    bar_width: 7
    bar_color: .67, 0.67, 0.67, 1

<EmptyLabel@Label>:
    text: 'Пустота поглотила ваш холодильник.\nИ вашу душу.'
    halign: 'center'
    italic: True
    multiline: True
    color: (0, 0, 0, .5)
    size_hint: 1, None

<GoodGridLayout@GridLayout>
    cols: 2
    size_hint: 1, None
    DeleteGoodButton:
        on_release:
            self.parent.parent.empty_list()
            self.parent.parent.good_list.remove(self.parent.children[1].text)
            self.parent.parent.remove_widget(self.parent)


#:import Factory kivy.factory.Factory
<GoodPopup@Popup>:
    id: good_popup
    name: self.set_ref(self)
    canvas.before:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            size: self.size
            pos: self.pos
    size_hint: .7, .7
    title: 'Новый продукт'
    title_align: 'center'
    title_color: 1, 0.58, 0.25, 1
    separator_color: 1, 1, 1, 1
    separator_height: 2

    BoxLayout:
        name_child: good_popup.get_ref()
        canvas:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                size: self.size
                pos: self.pos
        orientation: 'vertical'
        find_good_list: find_good_list
        GoodTextInput:
            size_hint: 1, .1
            multiline: False
            focus: True
            on_text_validate:
                self.print_find_ingredients(find_good_list)
        ScrollView:
            GridLayout:
                id: find_good_list
                cols: 1
                size_hint: 1, None
                height: self.minimum_height

<Label@GoodPopup>:
    canvas.before:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            size: self.size
            pos: self.pos

<DeleteFavButton@Button>
    background_normal: ''
    background_down: ''
    text: 'x'
    color: 1, 0.58, 0.25, 1
    font_size: 18
    text_size: self.size
    valign: 'top'
    halign: 'right'
    padding: [50, 0]

<ListLabel@Label>
    color: 0, 0, 0, 1
    size_hint: 1, .5
    text_size: self.size
    font_size: 14
    valign: 'top'
    padding: [20, 0]

<FindIngredientsButton@Button>
    color: 0, 0, 0, 1
    size_hint: 1, None
    background_normal: ''
    #background_down: ''
    text_size: self.size
    valign: 'center'
    padding: [20, 0]

    on_release:
        Factory.GoodPopup.good_list_name[1].add_good(self.text)
        self.parent.parent.parent.name_child.dismiss()



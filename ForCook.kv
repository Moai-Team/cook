<MainStructure>:
    id: main_structure
    canvas:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            size: self.size
            pos: self.pos
    orientation: 'vertical'
    manager: sm
    box_layout: box_layout
    ScreenManager:
        id: sm

        #-----------------------First Screen-------------------------

        Screen:
            name: 'fidge'
            BoxLayout:
                orientation: 'vertical'
                child_2: scroll_view
                BoxLayout:
                    size_hint: 1, .1
                    padding: [0, 0, 50, 0]
                    TitleLabel:
                        text: 'Мой холодильник'
                        size_hint: 1, 1
                    Button:
                        size_hint: .5, .5
                        background_normal: ''
                        background_down: ''
                        on_release:
                            self.parent.parent.children[0].children[0].check_good()
                        Image:
                            source: "img/check.png"
                            center_x: self.parent.center_x
                            center_y: self.parent.center_y
                            size: 23, 23


                    Button:
                        color: 1, 0.58, 0.25, 1
                        size_hint: .2, .5
                        text_size: self.size
                        valign: 'center'
                        halign: 'right'
                        text: '+'
                        font_size: 20
                        background_normal: ''
                        background_down: ''
                        on_release:
                            Factory.GoodPopup().open()
                            Factory.GoodPopup().good_list_id(self.parent.parent.child_2.child_1)
                TestLabel:
                    text: 'Список продуктов:'
                    font_size: 16
                    height: 50
                    padding: [20, 10]
                ScrollView:
                    id: scroll_view
                    child_1: good_list
                    canvas.before:
                    GoodListGridLayout:
                        id: good_list
                        cols: 1
                        size_hint: 1,None
                        height: self.minimum_height
                        EmptyLabel:
                            id: empty
                        Button:
                            size_hint: .1, None
                            padding: [50, 0]
                            background_down: ''
                            background_normal: ''
                            size: 0, 0
                            on_release:
                                sm.current = 'find'
                                sm.children[0].children[-1].children[0].children[-1].children[-4].children[0].add_good_in_find()
                            Image:
                                source: "img/loupe.png"
                                center_x: self.parent.center_x
                                center_y: self.parent.center_y
                                size: 0, 0
                        Label:
                            size_hint: 1, None


        #------------------Second Screen----------------------------

        Screen:
            name: 'book'
            BookScreenManager:
                id: category_manager
                Screen:
                    name: 'category_menu'
                    BoxLayout:
                        orientation: 'vertical'
                        TitleLabel:
                            text: 'Рецепты'
                        ScrollView:
                            canvas.before:
                                Color:
                                    rgba: 0, 0, 0, .1
                                Rectangle:
                                    size: self.size
                                    pos: self.pos
                            GridLayout:
                                cols: 1
                                size_hint: 1,None
                                height: self.minimum_height
                                spacing: 1
                                CategoryNameButton:
                                    text: 'Заготовки'
                                    height: 80
                                    on_release:
                                        category_manager.transition.direction = 'left'
                                        category_manager.current = 'book_preview'
                                        category_manager.find_recipes_book(self.text)
                                CategoryNameButton:
                                    text: 'Выпечка и десерты'
                                    height: 80
                                    on_release:
                                        category_manager.transition.direction = 'left'
                                        category_manager.current = 'book_preview'
                                        category_manager.find_recipes_book(self.text)
                                CategoryNameButton:
                                    text: 'Главные блюда'
                                    height: 80
                                    on_release:
                                        category_manager.transition.direction = 'left'
                                        category_manager.current = 'book_preview'
                                        category_manager.find_recipes_book(self.text)
                                CategoryNameButton:
                                    text: 'Завтраки'
                                    height: 80
                                    on_release:
                                        category_manager.transition.direction = 'left'
                                        category_manager.current = 'book_preview'
                                        category_manager.find_recipes_book(self.text)
                                CategoryNameButton:
                                    text: 'Салаты'
                                    height: 80
                                    on_release:
                                        category_manager.transition.direction = 'left'
                                        category_manager.current = 'book_preview'
                                        category_manager.find_recipes_book(self.text)
                                CategoryNameButton:
                                    text: 'Супы'
                                    height: 80
                                    on_release:
                                        category_manager.transition.direction = 'left'
                                        category_manager.current = 'book_preview'
                                        category_manager.find_recipes_book(self.text)
                                CategoryNameButton:
                                    text: 'Паста и пицца'
                                    height: 80
                                    on_release:
                                        category_manager.transition.direction = 'left'
                                        category_manager.current = 'book_preview'
                                        category_manager.find_recipes_book(self.text)
                                CategoryNameButton:
                                    text: 'Закуски'
                                    height: 80
                                    on_release:
                                        category_manager.transition.direction = 'left'
                                        category_manager.current = 'book_preview'
                                        category_manager.find_recipes_book(self.text)
                                CategoryNameButton:
                                    text: 'Сэндвичи'
                                    height: 80
                                    on_release:
                                        category_manager.transition.direction = 'left'
                                        category_manager.current = 'book_preview'
                                        category_manager.find_recipes_book(self.text)
                                CategoryNameButton:
                                    text: 'Ризотто'
                                    height: 80
                                    on_release:
                                        category_manager.transition.direction = 'left'
                                        category_manager.current = 'book_preview'
                                        category_manager.find_recipes_book(self.text)
                                CategoryNameButton:
                                    text: 'Напитки'
                                    height: 80
                                    on_release:
                                        category_manager.transition.direction = 'left'
                                        category_manager.current = 'book_preview'
                                        category_manager.find_recipes_book(self.text)
                                CategoryNameButton:
                                    text: 'Соусы и маринады'
                                    height: 80
                                    on_release:
                                        category_manager.transition.direction = 'left'
                                        category_manager.current = 'book_preview'
                                        category_manager.find_recipes_book(self.text)
                                CategoryNameButton:
                                    text: 'Бульоны'
                                    height: 80
                                    on_release:
                                        category_manager.transition.direction = 'left'
                                        category_manager.current = 'book_preview'
                                        category_manager.find_recipes_book(self.text)
                                Label:
                                    size_hint: 1, None
                                    text: ''
                Screen:
                    name: 'book_preview'
                    BoxLayout:
                        orientation: 'vertical'
                        BoxLayout:
                            size_hint: 1, .1
                            Label:
                                text: 'Просмотр рецепта'
                                color: 1, 0.58, 0.25, 1
                                size_hint: 1, 1
                                text_size: self.size
                                font_size: 20
                                padding: [20, 10]
                            Button:
                                size_hint: .4, 1
                                background_down: ''
                                background_normal: ''
                                on_release:
                                    self.parent.parent.parent.parent.transition.direction = 'right'
                                    self.parent.parent.parent.parent.current = 'category_menu'
                                Image:
                                    source: 'img/back_button.png'
                                    center_x: self.parent.center_x
                                    center_y: self.parent.center_y-10
                                    size: 30, 20
                        ScrollView:
                            canvas.before:
                                Color:
                                    rgba: 0, 0, 0, .1
                                Rectangle:
                                    size: self.size
                                    pos: self.pos
                            CategoryGridLayout:
                                BoxLayout:
                                    orientation: 'vertical'
                                    size_hint: 1, None
                                    height: sum(x.height for x in self.children)
                                    Label:
                                        size_hint: 1, None
                                        text: ''
                                        height: 70
                                        canvas.before:
                                            Color:
                                                rgba: 0, 0, 0, .1
                                            Rectangle:
                                                size: self.size
                                                pos: self.pos
                Screen:
                    name: 'recipe'
                    BoxLayout:
                        orientation: 'vertical'
                        BoxLayout:
                            size_hint: 1, .1
                            Label:
                                text: 'Просмотр рецепта'
                                color: 1, 0.58, 0.25, 1
                                size_hint: 1, 1
                                text_size: self.size
                                font_size: 20
                                padding: [20, 10]
                            FavoriteButton:
                                size_hint: .1, 1
                                background_normal: ''
                                background_down: ''
                                on_release:
                                    self.change_status(self.parent.parent.children[-2].children[0].children[-2].text)
                                    self.change_img()
                                Image:
                                    source: self.parent.status
                                    center_x: self.parent.center_x
                                    center_y: self.parent.center_y-5
                                    size: 30, 30
                            Button:
                                size_hint: .4, 1
                                background_down: ''
                                background_normal: ''
                                on_release:
                                    self.parent.parent.parent.parent.transition.direction = 'right'
                                    self.parent.parent.parent.parent.current = 'book_preview'
                                Image:
                                    source: 'img/back_button.png'
                                    center_x: self.parent.center_x
                                    center_y: self.parent.center_y-10
                                    size: 30, 20
                        ScrollView:
                            canvas.before:
                                Color:
                                    rgba: 0, 0, 0, .1
                                Rectangle:
                                    size: self.size
                                    pos: self.pos
                            BoxLayout:
                                canvas.before:
                                    Color:
                                        rgba: 1, 1, 1, 1
                                    Rectangle:
                                        size: self.width-20, self.height-20
                                        pos: self.x+10, self.y+10
                                orientation: 'vertical'
                                size_hint: 1, None
                                padding: [10, 10]
                                BoxLayout:
                                    padding: 5, 5
                                    Carousel:
                                        direction: 'right'
                                        scroll_timeout: 300
                                        ignore_perpendicular_swipes: True
                                        loop: True
                                        scroll_distance: 10
                                Label:
                                    text: ''
                                    color: 0, 0, 0, 1
                                    size_hint: 1, None
                                    font_size: 18
                                    height: 40
                                    text_size: self.size
                                    valign: 'center'
                                    padding: 10, 0
                                Label:
                                    canvas.before:
                                        Color:
                                            rgba: 0, 0, 0, .2
                                        Rectangle:
                                            size: self.width-10, self.height
                                            pos: self.x+5, self.y
                                    size_hint_y: None
                                    height: 2
                                Label:
                                    size_hint: 1, None
                                    text: ''
                                    color: 0, 0, 0, 1
                                    padding: 20, 10
                                    multiline: True
                                    font_size: 14
                                Label:
                                    canvas.before:
                                        Color:
                                            rgba: 0, 0, 0, .2
                                        Rectangle:
                                            size: self.width-10, self.height
                                            pos: self.x+5, self.y
                                    size_hint_y: None
                                    height: 2
                                Label:
                                    size_hint: 1, None
                                    text: ''
                                    color: 0, 0, 0, 1
                                    padding: 20, 10
                                    multiline: True
                                    font_size: 14
                                Label:
                                    canvas.before:
                                        Color:
                                            rgba: 0, 0, 0, .2
                                        Rectangle:
                                            size: self.width-10, self.height
                                            pos: self.x+5, self.y
                                    size_hint_y: None
                                    height: 2
                                Label:
                                    size_hint: 1, None
                                    text: ''
                                    color: 0, 0, 0, 1
                                    padding: 20, 10
                                    multiline: True
                                    font_size: 14
                                Label:
                                    size_hint: 1, None


    #-------------------------------Third Screen----------------------------------------
        Screen:
            name: 'find'
            ScreenManager:
                Screen:
                    name: 'find_main'
                    BoxLayout:
                        size_hint: 1, 1
                        orientation: 'vertical'
                        BoxLayout:
                            size_hint: 1, .16
                            Label:
                                text: 'Поиск рецептов'
                                color: 1, 0.58, 0.25, 1
                                size_hint: 1, 1
                                text_size: self.size
                                font_size: 20
                                padding: [20, 0]
                        BoxLayout:
                            padding: [15, 15]
                            size_hint: 1, .23
                            Spinner:
                                text: 'Категория'
                                font_size: 13
                                color: 1, .58, .25, 1
                                values: 'Любая категория', 'Заготовки', 'Выпечка и десерты', 'Главные блюда', 'Завтраки', 'Салаты', 'Супы', 'Паста и пицца', "Закуски", "Сэндвичи", "Ризотто", "Напитки", "Соусы и маринады", "Роллы и суши"
                                size: 100, 44
                                option_cls: 'FiltersSpinnerOption'
                                background_normal: 'img/button_background1.png'
                            Spinner:
                                text: 'Кухня'
                                font_size: 13
                                color: 1, .58, .25, 1
                                values: 'Любая кухня', 'Мексиканская', 'Итальянская', 'Русская', 'Грузинская', 'Японская', 'Китайская'
                                size: 100, 44
                                option_cls: 'FiltersSpinnerOption'
                                background_normal: 'img/button_background1.png'
                            Spinner:
                                text: 'Меню'
                                font_size: 13
                                color: 1, .58, .25, 1
                                values: 'Любое меню', 'Безглютеновое', 'Вегетарианское', 'Веганское','Безлактозное', 'Детское', 'Низкокалорийное', 'Постное', 'При диабете'
                                size: 100, 44
                                option_cls: 'FiltersSpinnerOption'
                                background_normal: 'img/button_background1.png'
                        BoxLayout:
                            size_hint: 1, .1
                            CheckBox:
                                size_hint: .3, 1
                                color: 1, .58, .25, 1
                            Label:
                                text: 'Только выбранные ингредиенты'
                                color: 0, 0, 0, 1
                                font_size: 14
                                text_size: self.size
                                valign: 'center'
                        ScrollView:
                            canvas.before:
                                Color:
                                    rgba: 0, 0, 0, .1
                                Rectangle:
                                    size: self.size
                                    pos: self.pos
                            GoodListGridLayout:
                                size_hint: 1, None
                                height: self.minimum_height
                                cols: 1
                                BoxLayout:
                                    size_hint: 1, None
                                    padding: [10, 10]
                                    spacing: 7
                                    Button:
                                        text: '+'
                                        font_size: 18
                                        color: 1, .58, .25, 1
                                        background_normal: ''
                                        background_down: ''
                                        on_release:
                                            Factory.FindPopup().open()
                                            Factory.FindPopup().good_list_id(self.parent.parent)
                                    Button:
                                        background_normal: ''
                                        background_down: ''
                                        on_release:
                                            self.parent.parent.remove_all_widget_global()
                                        Image:
                                            source: 'img/delete_all_ingredients_global.png'
                                            center_x: self.parent.center_x
                                            center_y: self.parent.center_y
                                            size: 45, 45

                                Label:
                                    size_hint: 1, None
                                    opacity: 0
                                    height: 30
                        FindGlobalButton:
                            size_hint: .2, .3
                            pos_hint: {'center_x': .5, 'center_y': .5}
                            background_normal: ''
                            background_down: ''
                            on_release:
                                self.filters = [self.parent.children[-2].children[2].text.lower(),
                                self.parent.children[-2].children[1].text.lower(),
                                self.parent.children[-2].children[0].text.lower()]
                                self.ingredients = self.parent.children[1].children[-1].good_list_2
                                self.only_this_setting = self.parent.children[-3].children[-1].active
                                self.parent.parent.parent.transition.direction = 'left'
                                self.parent.parent.parent.current = 'preview_recipes'
                                self.parent.parent.parent.children[0].children[-1].children[0].children[0].delete_when_back()
                                self.find_recipes(self.parent.parent.parent.children[0].children[-1].children[0].children[0], self.parent.parent.parent)

                            Image:
                                source: 'img/loupe.png'
                                center_x: self.parent.center_x
                                center_y: self.parent.center_y*1.5
                                size: 30, 30

                Screen:
                    name: 'preview_recipes'
                    BoxLayout:
                        orientation: 'vertical'
                        BoxLayout:
                            size_hint: 1, .1
                            Label:
                                text: 'Результаты поиска'
                                color: 1, 0.58, 0.25, 1
                                size_hint: 1, 1
                                text_size: self.size
                                font_size: 20
                                padding: [20, 10]
                            Button:
                                size_hint: .4, 1
                                background_down: ''
                                background_normal: ''
                                on_release:
                                    self.parent.parent.parent.parent.transition.direction = 'right'
                                    self.parent.parent.parent.parent.current = 'find_main'
                                Image:
                                    source: 'img/back_button.png'
                                    center_x: self.parent.center_x
                                    center_y: self.parent.center_y-10
                                    size: 30, 20
                        ScrollView:
                            canvas.before:
                                Color:
                                    rgba: 0, 0, 0, .1
                                Rectangle:
                                    size: self.size
                                    pos: self.pos

                            PreviewScreenBoxLayout:
                                orientation: 'vertical'
                                size_hint: 1, None
                                height: sum(x.height for x in self.children)
                                Label:
                                    size_hint: 1, None
                                    canvas.before:
                                        Color:
                                            rgba: 0, 0, 0, .1
                                        Rectangle:
                                            size: self.size
                                            pos: self.pos

                Screen:
                    name: 'recipe'
                    BoxLayout:
                        orientation: 'vertical'
                        BoxLayout:
                            size_hint: 1, .1
                            Label:
                                text: 'Просмотр рецепта'
                                color: 1, 0.58, 0.25, 1
                                size_hint: .5, 1
                                text_size: self.size
                                font_size: 20
                                padding: [20, 10]
                            FavoriteButton:
                                size_hint: .1, 1
                                background_normal: ''
                                background_down: ''
                                on_release:
                                    self.change_status(self.parent.parent.children[-2].children[0].children[-2].text)
                                    self.change_img()
                                Image:
                                    source: self.parent.status
                                    center_x: self.parent.center_x
                                    center_y: self.parent.center_y-5
                                    size: 30, 30

                            Button:
                                size_hint: .3, 1
                                background_down: ''
                                background_normal: ''
                                on_release:
                                    self.parent.parent.parent.parent.transition.direction = 'right'
                                    self.parent.parent.parent.parent.current = 'preview_recipes'
                                Image:
                                    source: 'img/back_button.png'
                                    center_x: self.parent.center_x
                                    center_y: self.parent.center_y-10
                                    size: 30, 20
                        ScrollView:
                            canvas.before:
                                Color:
                                    rgba: 0, 0, 0, .1
                                Rectangle:
                                    size: self.size
                                    pos: self.pos
                            BoxLayout:
                                canvas.before:
                                    Color:
                                        rgba: 1, 1, 1, 1
                                    Rectangle:
                                        size: self.width-20, self.height-20
                                        pos: self.x+10, self.y+10
                                orientation: 'vertical'
                                size_hint: 1, None
                                padding: [10, 10]
                                BoxLayout:
                                    padding: 5, 5
                                    Carousel:
                                        direction: 'right'
                                        scroll_timeout: 300
                                        ignore_perpendicular_swipes: True
                                        loop: True
                                        scroll_distance: 10
                                Label:
                                    text: ''
                                    color: 0, 0, 0, 1
                                    size_hint: 1, None
                                    font_size: 18
                                    height: 40
                                    text_size: self.size
                                    valign: 'center'
                                    padding: 10, 0
                                Label:
                                    canvas.before:
                                        Color:
                                            rgba: 0, 0, 0, .2
                                        Rectangle:
                                            size: self.width-10, self.height
                                            pos: self.x+5, self.y
                                    size_hint_y: None
                                    height: 2
                                Label:
                                    size_hint: 1, None
                                    text: ''
                                    color: 0, 0, 0, 1
                                    padding: 20, 10
                                    multiline: True
                                    font_size: 14
                                Label:
                                    canvas.before:
                                        Color:
                                            rgba: 0, 0, 0, .2
                                        Rectangle:
                                            size: self.width-10, self.height
                                            pos: self.x+5, self.y
                                    size_hint_y: None
                                    height: 2
                                Label:
                                    size_hint: 1, None
                                    text: ''
                                    color: 0, 0, 0, 1
                                    padding: 20, 10
                                    multiline: True
                                    font_size: 14
                                Label:
                                    canvas.before:
                                        Color:
                                            rgba: 0, 0, 0, .2
                                        Rectangle:
                                            size: self.width-10, self.height
                                            pos: self.x+5, self.y
                                    size_hint_y: None
                                    height: 2
                                Label:
                                    size_hint: 1, None
                                    text: ''
                                    color: 0, 0, 0, 1
                                    padding: 20, 10
                                    multiline: True
                                    font_size: 14
                                Label:
                                    size_hint: 1, None


    #-----------------------------Forth Screen---------------------------------------

        Screen:
            name: 'favorites'
            ScreenManager:
                Screen:
                    name: 'preview_recipes'
                    BoxLayout:
                        orientation: 'vertical'
                        BoxLayout:
                            size_hint: 1, .12
                            TitleLabel:
                                text: 'Избранное'
                                color: 1, 0.58, 0.25, 1
                                size_hint: 1, 1
                                text_size: self.size
                                #font_size: 20
                                padding: [20, 10]
                        ScrollView:
                            canvas.before:
                                Color:
                                    rgba: 0, 0, 0, .1
                                Rectangle:
                                    size: self.size
                                    pos: self.pos

                            PreviewScreenBoxLayout:
                                orientation: 'vertical'
                                size_hint: 1, None
                                height: sum(x.height for x in self.children)
                                Label:
                                    text: 'У вас пока нет сохраненных рецептов'
                                    size_hint: 1, None
                                    color: 0, 0, 0, .3
                                    canvas.before:
                                        Color:
                                            rgba: 0, 0, 0, .1
                                        Rectangle:
                                            size: self.size
                                            pos: self.pos
                                Label:
                                    size_hint: 1, None
                                    canvas.before:
                                        Color:
                                            rgba: 0, 0, 0, .1
                                        Rectangle:
                                            size: self.size
                                            pos: self.pos

                Screen:
                    name: 'recipe'
                    BoxLayout:
                        orientation: 'vertical'
                        BoxLayout:
                            size_hint: 1, .1
                            Label:
                                text: 'Просмотр рецепта'
                                color: 1, 0.58, 0.25, 1
                                size_hint: .5, 1
                                text_size: self.size
                                font_size: 20
                                padding: [20, 10]
                            FavoriteButton:
                                size_hint: .1, 1
                                background_normal: ''
                                background_down: ''
                                on_release:
                                    self.change_status(self.parent.parent.children[-2].children[0].children[-2].text)
                                    self.change_img()
                                Image:
                                    source: self.parent.status
                                    center_x: self.parent.center_x
                                    center_y: self.parent.center_y-5
                                    size: 30, 30

                            Button:
                                size_hint: .3, 1
                                background_down: ''
                                background_normal: ''
                                on_release:
                                    self.parent.parent.parent.parent.transition.direction = 'right'
                                    self.parent.parent.parent.parent.current = 'preview_recipes'
                                    self.parent.parent.parent.parent.children[0].children[0].children[0].children[0].favorite_preview()
                                Image:
                                    source: 'img/back_button.png'
                                    center_x: self.parent.center_x
                                    center_y: self.parent.center_y-10
                                    size: 30, 20
                        ScrollView:
                            canvas.before:
                                Color:
                                    rgba: 0, 0, 0, .1
                                Rectangle:
                                    size: self.size
                                    pos: self.pos
                            BoxLayout:
                                canvas.before:
                                    Color:
                                        rgba: 1, 1, 1, 1
                                    Rectangle:
                                        size: self.width-20, self.height-20
                                        pos: self.x+10, self.y+10
                                orientation: 'vertical'
                                size_hint: 1, None
                                padding: [10, 10]
                                BoxLayout:
                                    padding: 5, 5
                                    Carousel:
                                        direction: 'right'
                                        scroll_timeout: 300
                                        ignore_perpendicular_swipes: True
                                        loop: True
                                        scroll_distance: 10
                                Label:
                                    text: ''
                                    color: 0, 0, 0, 1
                                    size_hint: 1, None
                                    font_size: 18
                                    height: 40
                                    text_size: self.size
                                    valign: 'center'
                                    padding: 10, 0
                                Label:
                                    canvas.before:
                                        Color:
                                            rgba: 0, 0, 0, .2
                                        Rectangle:
                                            size: self.width-10, self.height
                                            pos: self.x+5, self.y
                                    size_hint_y: None
                                    height: 2
                                Label:
                                    size_hint: 1, None
                                    text: ''
                                    color: 0, 0, 0, 1
                                    padding: 20, 10
                                    multiline: True
                                    font_size: 14
                                Label:
                                    canvas.before:
                                        Color:
                                            rgba: 0, 0, 0, .2
                                        Rectangle:
                                            size: self.width-10, self.height
                                            pos: self.x+5, self.y
                                    size_hint_y: None
                                    height: 2
                                Label:
                                    size_hint: 1, None
                                    text: ''
                                    color: 0, 0, 0, 1
                                    padding: 20, 10
                                    multiline: True
                                    font_size: 14
                                Label:
                                    canvas.before:
                                        Color:
                                            rgba: 0, 0, 0, .2
                                        Rectangle:
                                            size: self.width-10, self.height
                                            pos: self.x+5, self.y
                                    size_hint_y: None
                                    height: 2
                                Label:
                                    size_hint: 1, None
                                    text: ''
                                    color: 0, 0, 0, 1
                                    padding: 20, 10
                                    multiline: True
                                    font_size: 14
                                Label:
                                    size_hint: 1, None


    #------------------------Menu----------------------------------

    BoxLayout:
        id:box_layout
        size_hint: 1, 0.10
        button1: fidge
        button2: book
        button3: find
        button4: favorites
        MenuButton:
            id: fidge
            on_release:
                root.manager.transition.duration = 0
                root.manager.current = 'fidge'
                root.box_layout.button1.children[0].source = "img/fridge.png"
                root.box_layout.button2.children[0].source = "img/book_grey.png"
                root.box_layout.button3.children[0].source = "img/loupe_grey.png"
                root.box_layout.button4.children[0].source = "img/star_grey.png"
            Image:
                source: "img/fridge.png"
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                size: 45, 45
        MenuButton:
            id: book
            on_release:
                root.manager.transition.duration = 0
                root.manager.current = 'book'
                root.box_layout.button1.children[0].source = "img/fridge_grey.png"
                root.box_layout.button2.children[0].source = "img/book.png"
                root.box_layout.button3.children[0].source = "img/loupe_grey.png"
                root.box_layout.button4.children[0].source = "img/star_grey.png"
            Image:
                source: "img/book_grey.png"
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                size: 55, 55
        MenuButton:
            id: find
            on_release:
                root.manager.transition.duration = 0
                root.manager.current = 'find'
                root.box_layout.button1.children[0].source = "img/fridge_grey.png"
                root.box_layout.button2.children[0].source = "img/book_grey.png"
                root.box_layout.button3.children[0].source = "img/loupe.png"
                root.box_layout.button4.children[0].source = "img/star_grey.png"
            Image:
                source: "img/loupe_grey.png"
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                size: 45, 45
        MenuButton:
            id: favorites
            on_release:
                root.manager.transition.duration = 0
                root.manager.current = 'favorites'
                root.manager.children[0].children[0].children[0].children[0].children[0].children[0].favorite_preview()
                root.box_layout.button1.children[0].source = "img/fridge_grey.png"
                root.box_layout.button2.children[0].source = "img/book_grey.png"
                root.box_layout.button3.children[0].source = "img/loupe_grey.png"
                root.box_layout.button4.children[0].source = "img/star.png"
            Image:
                source: "img/star_grey.png"
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                size: 45, 45



<Label>
    font_name: 'Roboto'

<TitleLabel@Label>
    color: 1, 0.58, 0.25, 1
    size_hint: 1, 0.1
    text_size: self.size
    font_size: 20
    padding: [20, 0]

<MenuButton@Button>
    background_normal: ''
    background_down: ''
    background_color: 1, 1, 1, 1
    color: .67, 0.67, 0.67, 1
    on_release:
        self.color = (1, 0.58, 0.25, 1)

<DeleteGoodButton@Button>
    background_normal: ''
    background_down: ''
    text: 'x'
    color: 1, 0.58, 0.25, 1
    font_size: 18
    text_size: self.size
    valign: 'center'
    halign: 'right'
    padding: [50, 0]

<TestLabel@Label>
    color: 0, 0, 0, 1
    size_hint: 1, None
    text_size: self.size
    font_size: 14
    valign: 'center'
    padding: [20, 0]

<CategoryNameButton@Button>
    size_hint: 1, None
    background_normal: ''
    background_down: ''
    color: 0, 0, 0, 1
    text_size: self.size
    font_size: 16
    valign: 'center'
    padding: [20, 0]

<BackCategoryButton@Button>
    size_hint: .05, 1
    text: '<-'
    color: 0, 0, 0, 1
    background_normal: ''
    background_down: ''

<TitleCategoryLabel@Label>
    size_hint: 1, 1
    color: 0, 0, 0, 1
    text_size: self.size
    valign: 'center'

<CategoryGridLayout@GridLayout>
    cols: 1
    size_hint: 1,None
    height: self.minimum_height

<ScrollView>
    effect_cls: 'ScrollEffect'
    bar_width: 7
    bar_color: .67, 0.67, 0.67, 1

<EmptyLabel@Label>:
    text: 'Пустота поглотила ваш холодильник'
    halign: 'center'
    italic: True
    multiline: True
    color: (0, 0, 0, .5)
    size_hint: 1, None

<GoodGridLayout@GridLayout>
    cols: 2
    size_hint: 1, None
    height: 80
    DeleteGoodButton:
        on_release:
            self.parent.parent.good_list_1.remove(self.parent.children[1].text)
            self.parent.parent.empty_list()
            self.parent.parent.del_from_file(self.parent.children[1].text)
            self.parent.parent.remove_widget(self.parent)


<GoodGlobalGridLayout>
    cols: 2
    size_hint: 1, None
    DeleteGoodButton:
        on_release:
            self.parent.parent.good_list_2.remove(self.parent.children[1].text)
            self.parent.parent.remove_widget(self.parent)

#:import Factory kivy.factory.Factory
<GoodPopup@Popup>:
    id: good_popup
    name: self.set_ref(self)
    canvas.before:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            size: self.size
            pos: self.pos
    size_hint: .7, .7
    title: 'Новый продукт'
    title_align: 'center'
    title_color: 1, 0.58, 0.25, 1
    separator_color: 1, 1, 1, 1
    separator_height: 2

    BoxLayout:
        name_child: good_popup.get_ref()
        canvas:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                size: self.size
                pos: self.pos
        orientation: 'vertical'
        find_good_list: find_good_list
        GoodTextInput:
            size_hint: 1, .1
            multiline: False
            focus: True
            on_text_validate:
                self.print_find_ingredients(find_good_list)
        ScrollView:
            GridLayout:
                id: find_good_list
                cols: 1
                size_hint: 1, None
                height: self.minimum_height

<Label@GoodPopup>:
    canvas.before:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            size: self.size
            pos: self.pos

<DeleteFavButton@Button>
    background_normal: ''
    background_down: ''
    text: 'x'
    color: 1, 0.58, 0.25, 1
    font_size: 18
    text_size: self.size
    valign: 'top'
    halign: 'right'
    padding: [50, 0]

<ListLabel@Label>
    color: 0, 0, 0, 1
    size_hint: 1, .5
    text_size: self.size
    font_size: 14
    valign: 'top'
    padding: [20, 0]

<FindIngredientsButton@Button>
    color: 0, 0, 0, 1
    size_hint: 1, None
    background_normal: ''
    #background_down: ''
    text_size: self.size
    valign: 'center'
    padding: [20, 0]

    on_release:
        Factory.GoodPopup.good_list_name[1].add_good(self.text)
        self.parent.parent.parent.name_child.dismiss()

<FiltersSpinnerOption@SpinnerOption>
    background_normal: ''
    background_color: 0, 0, 0, .1
    color: 0, 0, 0, 1
    font_size: 12

<FindIngredientsGlobalButton@Button>
    color: 0, 0, 0, 1
    size_hint: 1, None
    background_normal: ''
    #background_down: ''
    text_size: self.size
    valign: 'center'
    padding: [20, 0]

    on_release:
        Factory.FindPopup.good_list_name[1].add_good_global(self.text)
        self.parent.parent.parent.name_child.dismiss()

<FindPopup@Popup>
    id: good_popup
    name: self.set_ref(self)
    canvas.before:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            size: self.size
            pos: self.pos
    size_hint: .7, .7
    title: 'Новый продукт'
    title_align: 'center'
    title_color: 1, 0.58, 0.25, 1
    separator_color: 1, 1, 1, 1
    separator_height: 2

    BoxLayout:
        name_child: good_popup.get_ref()
        canvas:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                size: self.size
                pos: self.pos
        orientation: 'vertical'
        find_good_list: find_good_list
        GoodTextInput:
            size_hint: 1, .1
            multiline: False
            focus: True
            on_text_validate:
                self.print_find_ingredients_global(find_good_list)
        ScrollView:
            GridLayout:
                id: find_good_list
                cols: 1
                size_hint: 1, None
                height: self.minimum_height

<RecipeNamePreviewLabel>
    size_hint: 1, .2
    color: 0, 0, 0, 1
    font_size: 18
    text_size: self.size
    valign: 'top'
    halign: 'center'

<ItemLabel>
    color: 0, 0, 0, 1
    font_size: 14
    text_size: self.size
    valign: 'center'

<PreviewBoxLayout>
    canvas:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            size: self.width-20, self.height-20
            pos: self.x+10, self.y+10
